knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
house_train<-read_csv("house_train.csv")
house_test<-read_csv("house_test.csv")
house_test <- house_test %>% select(-Sale_Price)
write_csv(house_test, "house_test.csv")
house_train<-read_csv("house_train.csv")
house_test<-read_csv("house_test.csv")
View(house_test)
names(house_test)
x<-rnorm(10)
write_csv(x, "this.csv")
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
house_train<-read_csv("house_train.csv")
house_test<-read_csv("house_test.csv")
full_model <- lm(Sale_Price~., data = house_train)
full_preds <- predict(full_mod, house_test)
full_model <- lm(Sale_Price~., data = house_train)
full_preds <- predict(full_model, house_test)
write_csv(full_preds, "Full_preds.csv")
full_preds <- data.frame(preds = predict(full_model, house_test))
write_csv(full_preds, "Full_preds.csv")
library(randomForest)
?randomForest
library(randomForest)
rf_model <- randomForest(Sale_Price~., data = house_train, ntree = 1000)
rf_preds <- data.frame(preds = predict(rf_model, house_test))
library(glmnet)
model_x <- house_train %>% select(-Sale_Price) %>% rbind(house_test)
model_x <- house_train %>% select(-Sale_Price) %>% rbind(house_test) %>% model.matrix()
model_x <- house_train %>% select(-Sale_Price) %>% rbind(house_test) %>% model.matrix(~.)
all_data <- house_train %>% select(-Sale_Price) %>% rbind(house_test)
model_x <- model.matrix(~., data = all_data)
model_x <- model.matrix(~., data = all_data)[,-1]
x_train <- model_x [597,]
x_train <- model_x [1:597,]
x_train <- model_x[-1:597,]
x_train <- model_x[-(1:597),]
grid <- 10^seq(-3, 10, length = 50)
my_lasso <- glmnet(x = x_train, y = house_train$Sale_Price, alpha = 1, lambda = grid)
my_lasso_cv <- cv.glmnet(x = x_train, y = house_train$Sale_Price, alpha = 1, lambda = grid)
plot(my_lasso_cv)
library(glmnet)
all_data <- house_train %>% select(-Sale_Price) %>% rbind(house_test)
model_x <- model.matrix(~., data = all_data)[,-1]
x_test <- model_x [1:597,]
x_train <- model_x[-(1:597),]
grid <- 10^seq(-2, 5, length = 50)
my_lasso <- glmnet(x = x_train, y = house_train$Sale_Price, alpha = 1, lambda = grid)
my_lasso_cv <- cv.glmnet(x = x_train, y = house_train$Sale_Price, alpha = 1, lambda = grid)
plot(my_lasso_cv)
#x_train <- model_x[-(1:597),]
x_train <- model.matrix(Sale_Price~., data = house_train)[,-1]
my_lasso <- glmnet(x = x_train, y = house_train$Sale_Price, alpha = 1, lambda = grid)
my_lasso_cv <- cv.glmnet(x = x_train, y = house_train$Sale_Price, alpha = 1, lambda = grid)
plot(my_lasso_cv)
x_train <- model_x[598:2405,]
grid <- 10^seq(-2, 5, length = 50)
my_lasso <- glmnet(x = x_train, y = house_train$Sale_Price, alpha = 1, lambda = grid)
my_lasso_cv <- cv.glmnet(x = x_train, y = house_train$Sale_Price, alpha = 1, lambda = grid)
plot(my_lasso_cv)
all_data <- house_train %>% mutate(train = 1) %>%  select(-Sale_Price) %>% rbind(house_test %>% mutate(train = 0) )
model_x <- model.matrix(~., data = all_data)[,-1]
x_test <- model_x [train == 1,]
all_data <- house_train %>% mutate(train = 1) %>%  select(-Sale_Price) %>% rbind(house_test %>% mutate(train = 0) )
model_x <- model.matrix(~., data = all_data)[,-1]
x_test <- model_x [train == 1,]
names(model_x)
col(model_x)
View(model_x)
x_test <- model_x[train == 1,]
x_test <- model_x[train == 1]
View(x_test)
x_test <- model_x[train == 0]
x_test <- model_x[train == 0]
x_test <- model_x["train" == 0]
x_train <-model_x["train" == 1]
x_test <- x_test[-65]
x_test <- model_x["train" == 0]
x_test <- x_test[-65,]
x_test <- x_test[,-65]
x_test <- model_x["train" == 0]
x_test
x_test <- model_x["train" == 0,]
x_test
View(x_test)
x_test <- model_x["train" == 0]
x_test <- model_x[,"train" == 0]
all_data <- house_train  %>%  select(-Sale_Price) %>% rbind(house_test )
model_x <- model.matrix(~., data = all_data)[,-1]
x_test <- model_x[1:1808,]
x_train <-model_x[1809:2405]
2405-1809
library(glmnet)
all_data <- house_train  %>%  select(-Sale_Price) %>% rbind(house_test )
model_x <- model.matrix(~., data = all_data)[,-1]
x_test <- model_x[1:1808,]
x_train <-model_x[1809:2405]
grid <- 10^seq(-2, 5, length = 50)
my_lasso <- glmnet(x = x_train, y = house_train$Sale_Price, alpha = 1, lambda = grid)
library(glmnet)
all_data <- house_train  %>%  select(-Sale_Price) %>% rbind(house_test )
model_x <- model.matrix(~., data = all_data)[,-1]
x_train <- model_x[1:1808,]
x_test <-model_x[1809:2405]
grid <- 10^seq(-2, 5, length = 50)
my_lasso <- glmnet(x = x_train, y = house_train$Sale_Price, alpha = 1, lambda = grid)
my_lasso_cv <- cv.glmnet(x = x_train, y = house_train$Sale_Price, alpha = 1, lambda = grid)
plot(my_lasso_cv)
library(glmnet)
all_data <- house_train  %>%  select(-Sale_Price) %>% rbind(house_test )
model_x <- model.matrix(~., data = all_data)[,-1]
x_train <- model_x[1:1808,]
x_test <-model_x[1809:2405]
grid <- 10^seq(0, 5, length = 50)
my_lasso <- glmnet(x = x_train, y = house_train$Sale_Price, alpha = 1, lambda = grid)
my_lasso_cv <- cv.glmnet(x = x_train, y = house_train$Sale_Price, alpha = 1, lambda = grid)
plot(my_lasso_cv)
best_lambda <- my_lasso_cv$lambda.min
good_lambda <- my_lasso_cv$lambda.1se
lasso_best_preds <- predict.glmnet(newx = x_test, s = best_lambda)
lasso_best_preds <- predict.glmnet(my_lasso, newx = x_test, s = best_lambda)
x_test <-model_x[1809:2405,]
lasso_best_preds <- predict.glmnet(my_lasso, newx = x_test, s = best_lambda)
lasso_best_preds <- predict.glmnet(my_lasso, newx = x_test, s = best_lambda)
lasso_good_preds <- predict.glmnet(my_lasso, newx = x_test, s = good_lambda)
predict.glmnet(my_lasso, newx = x_test, s = best_lambda)
lasso_best_preds <- data.frame(preds = predict.glmnet(my_lasso, newx = x_test, s = best_lambda))
lasso_good_preds <- data.frame(preds = redict.glmnet(my_lasso, newx = x_test, s = good_lambda))
lasso_good_preds <- data.frame(preds = predict.glmnet(my_lasso, newx = x_test, s = good_lambda))
write_csv(rf_preds, "RF_preds.csv")
write_csv(full_preds, "Full_preds.csv")
write_csv(rf_preds, "RF_preds.csv")
write_csv(lasso_best_preds, "Lasso_Best_preds.csv")
write_csv(lasso_good_preds, "Lasso_Good_preds.csv")
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
read_plus <- function(flnm) {
read_csv(flnm) %>%
mutate(filename = flnm)
}
tbl_with_sources <-
list.files(pattern = "*.csv",
full.names = T) %>%
map_df(~read_plus(.))
View(tbl_with_sources)
read_plus <- function(flnm) {
read_csv(flnm) %>%
mutate(filename = flnm)
}
tbl_with_sources <-
list.files(pattern = "*.csv",
full.names = T) %>%
map_df(~read_plus(.))
full_preds
rf_preds
lasso_best_preds
lasso_good_preds
lasso_best_preds <- data.frame(preds = as.numeric(predict.glmnet(my_lasso, newx = x_test, s = best_lambda)))
lasso_good_preds <- data.frame(preds = as.numeric(predict.glmnet(my_lasso, newx = x_test, s = good_lambda)))
lasso_best_preds
write_csv(full_preds, "Full_preds.csv")
write_csv(rf_preds, "RF_preds.csv")
write_csv(lasso_best_preds, "Lasso_Best_preds.csv")
write_csv(lasso_good_preds, "Lasso_Good_preds.csv")
read_plus <- function(flnm) {
read_csv(flnm) %>%
mutate(filename = flnm)
}
tbl_with_sources <-
list.files(pattern = "*.csv",
full.names = T) %>%
map_df(~read_plus(.))
house_train<-read_csv("house_train.csv")
house_train<-read_csv("~/house_train.csv")
house_train<-read_csv("../house_train.csv")
house_test<-read_csv("../house_test.csv")
t <- read_csv("../house_test_prices.csv")
t <- read_csv("house_test_prices.csv")
tt <- t %>% select(Sale_Price)
write_csv(tt, "house_test_prices.csv")
house_prices<-read_csv("../house_test_prices.csv")
read_plus <- function(flnm) {
read_csv(flnm) %>%
mutate(filename = flnm)
}
results <-
list.files(pattern = "*.csv",
full.names = T) %>%
map_df(~read_plus(.))
results <-
list.files(pattern = "*.csv",
full.names = T) %>%
map_df(~read_plus(.)) %>% mutate(obs = house_prices)
2388 / 597
read_plus <- function(flnm) {
read_csv(flnm) %>%
mutate(filename = flnm)
}
results <-
list.files(pattern = "*.csv",
full.names = T) %>%
map_df(~read_plus(.))
results <-
list.files(pattern = "*.csv",
full.names = T) %>%
map_df(~read_plus(.)) %>%
rbind(rep(house_prices, 4))
results <-
list.files(pattern = "*.csv",
full.names = T) %>%
map_df(~read_plus(.)) %>%
mutate(obs =  rep(house_prices, 4))
results <-
list.files(pattern = "*.csv",
full.names = T) %>%
map_df(~read_plus(.)) %>%
mutate(obs =  rep(house_prices, times = 4))
rep(house_prices, times = 4)
rep(1:4, 4)
read_csv(flnm) %>%
mutate(filename = flnm) %>%
cbind(obs = house_price)
read_plus <- function(flnm) {
read_csv(flnm) %>%
mutate(filename = flnm) %>%
cbind(obs = house_price)
}
results <-
list.files(pattern = "*.csv",
full.names = T) %>%
map_df(~read_plus(.))
read_plus <- function(flnm) {
read_csv(flnm) %>%
mutate(filename = flnm) %>%
cbind(obs = house_prices)
}
results <-
list.files(pattern = "*.csv",
full.names = T) %>%
map_df(~read_plus(.))
results
View(results)
library(yardstick)
results %>% group_by(filname) %>% rmse(truth = obs, estimate = preds)
library(yardstick)
results %>% group_by(filename) %>% rmse(truth = obs, estimate = preds)
results %>% group_by(filename) %>% rmse(truth = Sale_Price, estimate = preds)
read_plus <- function(flnm) {
read_csv(flnm) %>%
mutate(filename = flnm) %>%
cbind(obs = house_prices)
}
results <-
list.files(pattern = "*.csv",
full.names = T) %>%
map_df(~read_plus(.))
library(yardstick)
results %>% group_by(filename) %>% rmse(truth = Sale_Price, estimate = preds)
results %>% group_by(filename) %>% rmse(truth = Sale_Price, estimate = preds) %>% arrange(.estimate)
